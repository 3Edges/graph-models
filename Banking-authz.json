{"elements":{"nodes":[{"data":{"labels":["NiamObject","NiamNode"],"id":"411","name":"Permissions","x":688.3722548567443,"y":654.5585064509185,"properties":{"name":"Permissions","displayName":"Permissions","icon":"default.png","isSubject":null,"isAction":null,"isResource":null,"selfRegistration":false}}},{"data":{"labels":["NiamObject","NiamNode","NiamAuthZObject"],"id":"412","name":"Account","x":788.2306170668121,"y":230.09378477322235,"properties":{"name":"Account","displayName":"Account","icon":"default.png","isSubject":null,"isAction":null,"isResource":null,"selfRegistration":false}}},{"data":{"labels":["NiamObject","NiamNode","NiamAuthZSubject"],"id":"407","name":"User","x":313.4687859111266,"y":532.9802673316542,"properties":{"name":"User","displayName":"User","icon":"default.png","isSubject":null,"isAction":null,"isResource":null,"selfRegistration":false}}},{"data":{"labels":["NiamObject","NiamNode"],"id":"403","name":"Branch","x":594.883262964867,"y":96.73408210225097,"properties":{"name":"Branch","displayName":"Branch","icon":"default.png","isSubject":null,"isAction":null,"isResource":null,"selfRegistration":false}}},{"data":{"labels":["NiamObject","NiamNode","NiamAuthZObject"],"id":"401","name":"Bank","x":249.44904371531135,"y":210.98082934491276,"properties":{"name":"Bank","displayName":"Bank"}}},{"data":{"labels":["NiamEnum","NiamNode"],"id":"2660","name":"Branch_Type","x":908.8818664550781,"y":-16.33281707763672,"properties":{"name":"Branch_Type","displayName":"Branch Type","enumerates":["MAIN","NEIGHBOURHOOD","VIRTUAL"]}}},{"data":{"labels":["NiamEnum","NiamNode"],"id":"2663","name":"Account_Type","x":1125.8160400390625,"y":244.70952606201172,"properties":{"name":"Account_Type","displayName":"Account Type","enumerates":["CHEQUING","SAVINGS","TRADING","LOAN","MORTGAGE"]}}},{"data":{"labels":["NiamEnum","NiamNode"],"id":"2661","name":"CRUD_Permission","x":1032.1392822265625,"y":588.2531433105469,"properties":{"name":"CRUD_Permission","displayName":"CRUD Permission","enumerates":["UPDATE","CREATE","READ","DELETE","FORGET"]}}},{"data":{"labels":["NiamField"],"id":"2662","name":"Valid_User_Permission","x":null,"y":null,"properties":{"name":"Valid_User_Permission","displayName":"Valid-User-Permission","fieldType":"NiamEnum","relatedTo":"cb63548d-058e-404e-b20e-be1fa207f176","relatedToName":"CRUD_Permission","isArray":false,"icon":"field-default.png","isRequired":true,"isNaming":false,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"415","name":"APPLIES_TO","x":null,"y":null,"properties":{"name":"APPLIES_TO","displayName":"APPLIES_TO","fieldType":"Relationship","relatedTo":"b34f3067-61d4-4541-be91-bad376169f61","relatedToName":"Account","isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":"OUT","accessibleOnOppositeSide":false,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"2664","name":"Account_Type","x":null,"y":null,"properties":{"name":"Account_Type","displayName":"Account Type","fieldType":"NiamEnum","relatedTo":"ad7b82ec-ef5c-4ebe-89fb-6f922fbc712f","relatedToName":"Account_Type","isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":false,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"414","name":"CreateDate","x":null,"y":null,"properties":{"name":"CreateDate","displayName":"CreateDate","fieldType":"String","relatedTo":null,"relatedToName":null,"isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"413","name":"AccNumber","x":null,"y":null,"properties":{"name":"AccNumber","displayName":"AccNumber","fieldType":"String","relatedTo":null,"relatedToName":null,"isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"2659","name":"Has_Permissions","x":null,"y":null,"properties":{"name":"Has_Permissions","displayName":"Has Permissions","fieldType":"Relationship","relatedTo":"beeeee08-399b-4221-ad9f-aff2e3562e8a","relatedToName":"Permissions","isArray":false,"icon":"field-default.png","isRequired":true,"isNaming":false,"maxLength":0,"minLength":0,"relLabelName":null,"direction":"OUT","accessibleOnOppositeSide":false,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"421","name":"City","x":null,"y":null,"properties":{"name":"City","displayName":"City","fieldType":"String","relatedTo":null,"relatedToName":null,"isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"416","name":"OWNS","x":null,"y":null,"properties":{"name":"OWNS","displayName":"OWNS","fieldType":"Relationship","relatedTo":"b34f3067-61d4-4541-be91-bad376169f61","relatedToName":"Account","isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":"OUT","accessibleOnOppositeSide":false,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"417","name":"WORKS_FOR","x":null,"y":null,"properties":{"name":"WORKS_FOR","displayName":"WORKS_FOR","fieldType":"Relationship","relatedTo":"b1723006-9ae1-473c-b7f4-2fb3d8094a39","relatedToName":"Bank","isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":"OUT","accessibleOnOppositeSide":false,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"409","name":"Name","x":null,"y":null,"properties":{"name":"Name","displayName":"Name","fieldType":"String","relatedTo":null,"relatedToName":null,"isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"408","name":"Email","x":null,"y":null,"properties":{"name":"Email","displayName":"Email","fieldType":"String","relatedTo":null,"relatedToName":null,"isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"2666","name":"Branch_Type","x":null,"y":null,"properties":{"name":"Branch_Type","displayName":"Branch Type","fieldType":"NiamEnum","relatedTo":"a1d9ed28-04c6-4b22-89d4-15dfa66b9db8","relatedToName":"Branch_Type","isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":false,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"410","name":"City","x":null,"y":null,"properties":{"name":"City","displayName":"City","fieldType":"String","relatedTo":null,"relatedToName":null,"isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"418","name":"HAS","x":null,"y":null,"properties":{"name":"HAS","displayName":"HAS","fieldType":"Relationship","relatedTo":"b34f3067-61d4-4541-be91-bad376169f61","relatedToName":"Account","isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":"OUT","accessibleOnOppositeSide":false,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"406","name":"Addres","x":null,"y":null,"properties":{"name":"Addres","displayName":"Address","fieldType":"String","relatedTo":null,"relatedToName":null,"isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"405","name":"Name","x":null,"y":null,"properties":{"name":"Name","displayName":"Name","fieldType":"String","relatedTo":null,"relatedToName":null,"isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"404","name":"HAS","x":null,"y":null,"properties":{"name":"HAS","displayName":"HAS","fieldType":"Relationship","relatedTo":"5828d7f8-2d5f-416a-bf11-c608f0f087e0","relatedToName":"Branch","isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":"OUT","accessibleOnOppositeSide":false,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamField"],"id":"402","name":"Name","x":null,"y":null,"properties":{"name":"Name","displayName":"Name","fieldType":"String","relatedTo":null,"relatedToName":null,"isArray":false,"icon":"field-default.png","isRequired":false,"isNaming":null,"maxLength":0,"minLength":0,"relLabelName":null,"direction":null,"accessibleOnOppositeSide":null,"oppositeSideFieldName":null,"regex":null,"isUnique":null,"customValidationFunc":null,"properties":null}}},{"data":{"labels":["NiamScript","NiamNode"],"id":"93020","name":"SendEmail","x":-34.188594818115234,"y":454.10021448135376,"properties":{"name":"SendEmail","displayName":"SendEmail","returnType":null,"funcName":"sendEmail","scriptText":"Ly8gQXJnczogdXNlciwgZW1haWxPYmosIGFyZ3MKY29uc3QgXyA9IHRoaXMuXzsKY29uc3QgYnVpbGRFbWFpbFRlbXBsYXRlID0gIChsb2NhbGUsIGVtYWlsT2JqKSA9PiB7CiAgICB2YXIgZGVmYXVsdEVtYWlsT2JqID0gdGhpcy5lbWFpbFRlbXBsYXRlcygpLmZpbmQoaXQgPT4gaXQubmFtZSA9PSAiZGVmYXVsdCIpLAogICAgICAgIHNlY3Rpb25FbnVtID0gWyJoZWFkZXIiLCJtYWluIiwiZm9vdGVyIl0sCiAgICAgICAgZW1haWxFbnVtID0gW2VtYWlsT2JqXSwgCiAgICAgICAgbG9jYWxlRW51bSA9IFtsb2NhbGUsImVuX1VTIl0sCiAgICAgICAgc3RvcExvb2tpbmcsCiAgICAgICAgdG1wbHRTdWJqZWN0LAogICAgICAgIHRtcGx0Qm9keSA9ICIiOwogICAgCiAgICBpZiAoZGVmYXVsdEVtYWlsT2JqICE9IHVuZGVmaW5lZCAmJiBkZWZhdWx0RW1haWxPYmouZW5hYmxlZCkgewogICAgICAgIGVtYWlsRW51bS5wdXNoKGRlZmF1bHRFbWFpbE9iaik7CiAgICB9CiAgICAKICAgIF8uZWFjaChzZWN0aW9uRW51bSwgZnVuY3Rpb24oc2VjdGlvbikgewogICAgICAgIHN0b3BMb29raW5nID0gZmFsc2U7CiAgICAgICAgXy5lYWNoKGVtYWlsRW51bSwgZnVuY3Rpb24gKGVtYWlsKSB7CiAgICAgICAgICAgIF8uZWFjaChsb2NhbGVFbnVtLCBmdW5jdGlvbihsb2MpIHsKICAgICAgICAgICAgICAgIHN0b3BMb29raW5nID0gc3RvcExvb2tpbmcgfHwgXy5maW5kKGVtYWlsLmNvbnRlbnQsIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGMubG9jYWxlICE9IGxvYykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcGx0U3ViamVjdCA9PSB1bmRlZmluZWQgJiYgYy5zdWJqZWN0ICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wbHRTdWJqZWN0ID0gYy5zdWJqZWN0OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZEh0bWxTZWN0aW9uID0gXy5maW5kKGMuYm9keSwgeyJzZWN0aW9uIjogc2VjdGlvbn0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmRIdG1sU2VjdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wbHRCb2R5ICs9IGZvdW5kSHRtbFNlY3Rpb24uaHRtbDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm91bmRIdG1sU2VjdGlvbjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiB7InN1YmplY3QiOiB0bXBsdFN1YmplY3QsICJib2R5IjogdG1wbHRCb2R5fTsKCn0KCmlmIChlbWFpbE9iaiAhPSB1bmRlZmluZWQgJiYgZW1haWxPYmouZW5hYmxlZCAmJiB1c2VyICYmIHVzZXIubWFpbCkgewogICAgY29uc3QgZW5vY1NldHRpbmdzID0gdGhpcy5lbm9jU2V0dGluZ3MoIiIpOwogICAgYXJncy5jb21wYW55ID0gZW5vY1NldHRpbmdzW3VzZXIuYnJhbmQudG9Mb3dlckNhc2UoKV07CiAgICBhcmdzLnVzZXIgPSB1c2VyOwogICAgaWYgKGFyZ3MucGFzc19yZXNldF9saW5rKSB7CiAgICAgICAgYXJncy5wYXNzX3Jlc2V0X2xpbmsgPSBhcmdzLmNvbXBhbnkuaWRtX2Jhc2V1cmwgKyBhcmdzLnBhc3NfcmVzZXRfbGluazsKICAgfQoKICAgIGxldCBsb2NhbGUgPSB1c2VyLmRlZmF1bHRfbG9jYWxlID8gdXNlci5kZWZhdWx0X2xvY2FsZSA6ICJlbl9VUyIsCiAgICAgICAgbG9jID0gbG9jYWxlLnN1YnN0cmluZygwLDIpLAogICAgICAgIHRtcGx0Q29udGVudCA9IGJ1aWxkRW1haWxUZW1wbGF0ZShsb2NhbGUsIGVtYWlsT2JqKSwKICAgICAgICB0bXBsdEJvZHkgPSB0bXBsdENvbnRlbnQuYm9keS5yZXBsYWNlKC8mbHQ7JT0gL2csJzwlPSAnKS5yZXBsYWNlKC8gJSZndDsvZywnICU+JyksCiAgICAgICAgZW1haWxCb2R5ID0gXy50ZW1wbGF0ZSh0bXBsdEJvZHkpKGFyZ3MpLAogICAgICAgIHRtcGx0U3ViamVjdCA9IHRtcGx0Q29udGVudC5zdWJqZWN0LnJlcGxhY2UoLyZsdDslPSAvZywnPCU9ICcpLnJlcGxhY2UoLyAlJmd0Oy9nLCcgJT4nKSwKICAgICAgICBlbWFpbFN1YmplY3QgPSBfLnRlbXBsYXRlKHRtcGx0U3ViamVjdCkoYXJncyk7CgogICAgLyppZiAoZW1haWxCb2R5VGVtcGxhdGUgPT0gIiIpIHsKICAgICAgICAvLyBlbWFpbE9iaiBzaG91bGQgaGF2ZSBpbmNsdWRlIGEgY29udGVudCAoc3ViamVjdCBhbmQgYm9keSkgZm9yIGVuX1VTIGxvY2FsZQogICAgICAgIHRocm93IHsgY29kZTogNTAwLCBtZXNzYWdlOiAiTm8gZW1haWwgYm9keSBjb3VsZCBiZSBidWlsdCBmb3IgZW1haWwgb2JqZWN0ICIgKyBlbWFpbE9iai5uYW1lIH07CiAgICB9Ki8KICAgIGVtYWlsID0gewogICAgICAgIGZyb206ICdudWxsaWRlbW9AZ21haWwuY29tJywKICAgICAgICBzdWJqZWN0OiBlbWFpbFN1YmplY3QsCiAgICAgICAgdG86IHVzZXIubWFpbCwKICAgICAgICBodG1sOiBlbWFpbEJvZHkKICAgIH07CiAgICBpZiAoYXJncy5jb21wYW55W2xvY10uZnJvbWVtYWlsKSB7CiAgICAgICAgZW1haWxbJ2Zyb20nXSA9IGFyZ3MuY29tcGFueVtsb2NdLmZyb21lbWFpbDsKICAgIH0KICAgIHRoaXMuc2VuZEVtYWlsRnVuYyhlbWFpbCkKfQo="}}}],"edges":[{"data":{"source":"407","target":"412","name":"NIAM_AUTHZ_PATH","id":"3298-edge","properties":{"name":"AuthPath","displayName":"AuthPath","relatedTo":"416","fieldType":null,"eventType":null}}},{"data":{"source":"411","target":"2662","name":"HAS_NIAM_FIELD","id":"3304-edge"}},{"data":{"source":"411","target":"415","name":"HAS_NIAM_FIELD","id":"614-edge"}},{"data":{"source":"412","target":"2664","name":"HAS_NIAM_FIELD","id":"3307-edge"}},{"data":{"source":"412","target":"414","name":"HAS_NIAM_FIELD","id":"610-edge"}},{"data":{"source":"412","target":"413","name":"HAS_NIAM_FIELD","id":"609-edge"}},{"data":{"source":"407","target":"2659","name":"HAS_NIAM_FIELD","id":"3299-edge"}},{"data":{"source":"407","target":"421","name":"HAS_NIAM_FIELD","id":"607-edge"}},{"data":{"source":"407","target":"416","name":"HAS_NIAM_FIELD","id":"615-edge"}},{"data":{"source":"407","target":"417","name":"HAS_NIAM_FIELD","id":"613-edge"}},{"data":{"source":"407","target":"409","name":"HAS_NIAM_FIELD","id":"605-edge"}},{"data":{"source":"407","target":"408","name":"HAS_NIAM_FIELD","id":"604-edge"}},{"data":{"source":"403","target":"2666","name":"HAS_NIAM_FIELD","id":"3305-edge"}},{"data":{"source":"403","target":"410","name":"HAS_NIAM_FIELD","id":"606-edge"}},{"data":{"source":"403","target":"418","name":"HAS_NIAM_FIELD","id":"617-edge"}},{"data":{"source":"403","target":"406","name":"HAS_NIAM_FIELD","id":"602-edge"}},{"data":{"source":"403","target":"405","name":"HAS_NIAM_FIELD","id":"601-edge"}},{"data":{"source":"401","target":"404","name":"HAS_NIAM_FIELD","id":"599-edge"}},{"data":{"source":"401","target":"402","name":"HAS_NIAM_FIELD","id":"597-edge"}},{"data":{"source":"2662","target":"2661","name":"RELATED_TO_NIAM_NODE","id":"3300-edge"}},{"data":{"source":"415","target":"412","name":"RELATED_TO_NIAM_NODE","id":"622-edge"}},{"data":{"source":"2664","target":"2663","name":"RELATED_TO_NIAM_NODE","id":"3308-edge"}},{"data":{"source":"2659","target":"411","name":"RELATED_TO_NIAM_NODE","id":"3302-edge"}},{"data":{"source":"416","target":"412","name":"RELATED_TO_NIAM_NODE","id":"616-edge"}},{"data":{"source":"417","target":"401","name":"RELATED_TO_NIAM_NODE","id":"611-edge"}},{"data":{"source":"2666","target":"2660","name":"RELATED_TO_NIAM_NODE","id":"3310-edge"}},{"data":{"source":"418","target":"412","name":"RELATED_TO_NIAM_NODE","id":"618-edge"}},{"data":{"source":"404","target":"403","name":"RELATED_TO_NIAM_NODE","id":"603-edge"}},{"data":{"source":"93020","target":"407","name":"NIAM_APPLIES_TO","id":"92545-edge","properties":{"name":"senEmail","displayName":"sendEmail","relatedTo":"ce9cd29b-2c4f-40b2-9210-82c6d20e5b21","fieldType":"Relationship","eventType":"onCreate"}}}]}}